import type { DashboardLanguage } from "@/lib/types";

type TranslationParams = Record<string, number | string>;
type TranslationValue = string | ((params: TranslationParams) => string);
type Dictionary = Record<string, TranslationValue>;

const dictionaries: Record<DashboardLanguage, Dictionary> = {
  en: {
    "nav.dashboard": "Dashboard",
    "nav.products": "Products",
    "nav.users": "Users",
    "nav.marketing": "Marketing",
    "nav.analytics": "Analytics",
    "nav.settings": "Settings",
    "nav.search": "Search",
    "nav.logout": "Logout",

    "common.viewAll": "View All",
    "common.actions": "Actions",
    "common.image": "Image",
    "common.name": "Name",
    "common.email": "Email",
    "common.plan": "Plan",
    "common.dateCreated": "Date Created",
    "common.category": "Category",
    "common.price": "Price",
    "common.stock": "Stock",
    "common.status": "Status",
    "common.cancel": "Cancel",
    "common.add": "Add",
    "common.new": "New",

    "dashboard.welcomeBack": "Welcome back, John",
    "dashboard.aiInsights": "AI Insights",
    "dashboard.mrrGrowth": "MRR Growth",
    "dashboard.lastDays": "Last {days} Days",
    "dashboard.recentUsers": "Recent Users",
    "dashboard.accountBalance": "Account Balance",
    "dashboard.withdraw": "Withdraw",
    "dashboard.availableToWithdraw": "Available to withdraw",
    "dashboard.succeeded": "Succeeded",
    "dashboard.checkoutConversionRate": "Checkout Conversion Rate",
    "dashboard.last31Days": "Last 31 Days",

    "products.title": "Products",
    "products.count": "{count} Products",
    "products.addProduct": "Add Product",
    "products.searchPlaceholder": "Search by name, category, or SKU...",
    "products.showing": "Showing {shown} of {total} products",
    "products.loading": "Loading products...",
    "products.noResults": "No products found matching your search.",
    "products.product": "Product",
    "products.viewDetails": "View Details",
    "products.stockLabel": "Stock: {count}",
    "products.addNewProduct": "Add New Product",
    "products.productImage": "Product Image",
    "products.chooseImage": "Choose Image",
    "products.productName": "Product Name",
    "products.enterProductName": "Enter product name",
    "products.sku": "SKU",
    "products.enterSku": "e.g., PRD-2024-001",
    "products.stockQuantity": "Stock Quantity",
    "products.description": "Description",
    "products.enterDescription": "Enter product description...",

    "users.title": "Users",
    "users.count": "{count} Users",
    "users.proCount": "{count} Pro Users",
    "users.addUser": "Add User",
    "users.searchPlaceholder": "Search by name or email...",
    "users.showing": "Showing {shown} of {total} users",
    "users.loading": "Loading users...",
    "users.noResults": "No users found matching your search.",
    "users.edit": "Edit",
    "users.sendEmail": "Send email",
    "users.addNewUser": "Add New User",
    "users.profilePicture": "Profile Picture",
    "users.chooseImage": "Choose Image",
    "users.enterUserName": "Enter user name",
    "users.enterUserEmail": "Enter user email",

    "analytics.title": "Analytics",
    "analytics.last30Days": "Last 30 Days",
    "analytics.totalVisitors": "Total Visitors",
    "analytics.appDownloads": "App Downloads",
    "analytics.activeUsers": "Active Users",
    "analytics.avgSession": "Avg. Session",
    "analytics.visitorsOverTime": "Visitors Over Time",
    "analytics.downloadsByPlatform": "Downloads by Platform",
    "analytics.thisMonth": "This Month",
    "analytics.topCountries": "Top Countries",
    "analytics.deviceTypes": "Device Types",
    "analytics.usageDistribution": "Usage Distribution",
    "analytics.visitors": "visitors",

    "marketing.title": "Marketing",
    "marketing.campaignsCount": "{count} Campaigns",
    "marketing.searchPlaceholder": "Search campaigns by name, type, or status...",
    "marketing.showing": "Showing {shown} of {total} campaigns",
    "marketing.campaignName": "Campaign Name",
    "marketing.type": "Type",
    "marketing.frequency": "Frequency",
    "marketing.status": "Status",
    "marketing.noResults": "No campaigns found matching your search.",
    "marketing.recurring": "Recurring",
    "marketing.next": "Next",
    "marketing.launch": "Launch",
    "marketing.push": "Push",
    "marketing.inApp": "In-App",
    "marketing.acquisition": "Acquisition",
    "marketing.retargeting": "Retargeting",

    "settings.title": "Settings",
    "settings.saveChanges": "Save Changes",
    "settings.saving": "Saving...",
    "settings.profileInformation": "Profile Information",
    "settings.updatePersonalDetails": "Update your personal details",
    "settings.firstName": "First Name",
    "settings.lastName": "Last Name",
    "settings.email": "Email",
    "settings.phone": "Phone",
    "settings.company": "Company",
    "settings.security": "Security",
    "settings.managePasswordSecurity": "Manage your password and security settings",
    "settings.password": "Password",
    "settings.lastChanged3Months": "Last changed 3 months ago",
    "settings.changePassword": "Change Password",
    "settings.notifications": "Notifications",
    "settings.chooseNotifications": "Choose what notifications you receive",
    "settings.emailNotifications": "Email Notifications",
    "settings.receiveEmailUpdates": "Receive email updates about your account",
    "settings.pushNotifications": "Push Notifications",
    "settings.receivePushNotifications": "Receive push notifications on your device",
    "settings.weeklyDigest": "Weekly Digest",
    "settings.getWeeklySummary": "Get a weekly summary of your activity",
    "settings.preferences": "Preferences",
    "settings.customizeExperience": "Customize your experience",
    "settings.language": "Language",
    "settings.currency": "Currency",
    "settings.currencyUSD": "Dollar (USD)",
    "settings.currencyKGS": "Som (KGS)",
    "settings.currencyRUB": "Ruble (RUB)",
    "settings.currencyKZT": "Tenge (KZT)",
    "settings.appearance": "Appearance",
    "settings.customizeLooks": "Customize how the app looks",
    "settings.light": "Light",
    "settings.dark": "Dark",
    "settings.system": "System",
    "settings.saved": "Settings saved",
    "settings.loadError": "Could not load settings from API. Using local values.",
    "settings.saveError": "Could not save settings. Please try again.",

    "spotlight.searchPlaceholder": "Search users, products, campaigns, etc.",

    "login.signIn": "Sign in",
    "login.continueMessage": "To continue, please sign in to your dashboard.",
    "login.continueGoogle": "Continue with Google",
    "login.continueApple": "Continue with Apple",
    "login.or": "or",
    "login.emailAddress": "Email Address",
    "login.password": "Password",
    "login.agreeTo": "I agree to the",
    "login.terms": "Terms and Conditions",
    "login.and": "and",
    "login.privacy": "Privacy Policy",
    "login.needAccess": "Need access? Contact your administrator.",
  },
  ru: {
    "nav.dashboard": "Дашборд",
    "nav.products": "Товары",
    "nav.users": "Пользователи",
    "nav.marketing": "Маркетинг",
    "nav.analytics": "Аналитика",
    "nav.settings": "Настройки",
    "nav.search": "Поиск",
    "nav.logout": "Выйти",

    "common.viewAll": "Смотреть все",
    "common.actions": "Действия",
    "common.image": "Изображение",
    "common.name": "Имя",
    "common.email": "Email",
    "common.plan": "План",
    "common.dateCreated": "Дата создания",
    "common.category": "Категория",
    "common.price": "Цена",
    "common.stock": "Остаток",
    "common.status": "Статус",
    "common.cancel": "Отмена",
    "common.add": "Добавить",
    "common.new": "Новый",

    "dashboard.welcomeBack": "С возвращением, John",
    "dashboard.aiInsights": "AI-инсайты",
    "dashboard.mrrGrowth": "Рост MRR",
    "dashboard.lastDays": "Последние {days} дней",
    "dashboard.recentUsers": "Новые пользователи",
    "dashboard.accountBalance": "Баланс счета",
    "dashboard.withdraw": "Вывести",
    "dashboard.availableToWithdraw": "Доступно к выводу",
    "dashboard.succeeded": "Успешно",
    "dashboard.checkoutConversionRate": "Конверсия в оплату",
    "dashboard.last31Days": "Последние 31 день",

    "products.title": "Товары",
    "products.count": "{count} товаров",
    "products.addProduct": "Добавить товар",
    "products.searchPlaceholder": "Поиск по названию, категории или SKU...",
    "products.showing": "Показано {shown} из {total} товаров",
    "products.loading": "Загрузка товаров...",
    "products.noResults": "Товары по вашему запросу не найдены.",
    "products.product": "Товар",
    "products.viewDetails": "Подробнее",
    "products.stockLabel": "Остаток: {count}",
    "products.addNewProduct": "Добавить новый товар",
    "products.productImage": "Изображение товара",
    "products.chooseImage": "Выбрать изображение",
    "products.productName": "Название товара",
    "products.enterProductName": "Введите название товара",
    "products.sku": "SKU",
    "products.enterSku": "например, PRD-2024-001",
    "products.stockQuantity": "Количество на складе",
    "products.description": "Описание",
    "products.enterDescription": "Введите описание товара...",

    "users.title": "Пользователи",
    "users.count": "{count} пользователей",
    "users.proCount": "{count} Pro пользователей",
    "users.addUser": "Добавить пользователя",
    "users.searchPlaceholder": "Поиск по имени или email...",
    "users.showing": "Показано {shown} из {total} пользователей",
    "users.loading": "Загрузка пользователей...",
    "users.noResults": "Пользователи по вашему запросу не найдены.",
    "users.edit": "Редактировать",
    "users.sendEmail": "Отправить email",
    "users.addNewUser": "Добавить нового пользователя",
    "users.profilePicture": "Фото профиля",
    "users.chooseImage": "Выбрать изображение",
    "users.enterUserName": "Введите имя пользователя",
    "users.enterUserEmail": "Введите email пользователя",

    "analytics.title": "Аналитика",
    "analytics.last30Days": "Последние 30 дней",
    "analytics.totalVisitors": "Всего посетителей",
    "analytics.appDownloads": "Скачивания приложения",
    "analytics.activeUsers": "Активные пользователи",
    "analytics.avgSession": "Средняя сессия",
    "analytics.visitorsOverTime": "Посетители по времени",
    "analytics.downloadsByPlatform": "Скачивания по платформам",
    "analytics.thisMonth": "Этот месяц",
    "analytics.topCountries": "Топ стран",
    "analytics.deviceTypes": "Типы устройств",
    "analytics.usageDistribution": "Распределение использования",
    "analytics.visitors": "посетителей",

    "marketing.title": "Маркетинг",
    "marketing.campaignsCount": "{count} кампаний",
    "marketing.searchPlaceholder": "Поиск кампаний по названию, типу или статусу...",
    "marketing.showing": "Показано {shown} из {total} кампаний",
    "marketing.campaignName": "Название кампании",
    "marketing.type": "Тип",
    "marketing.frequency": "Частота",
    "marketing.status": "Статус",
    "marketing.noResults": "Кампании по вашему запросу не найдены.",
    "marketing.recurring": "Регулярно",
    "marketing.next": "Следующая",
    "marketing.launch": "Запуск",
    "marketing.push": "Push",
    "marketing.inApp": "In-App",
    "marketing.acquisition": "Привлечение",
    "marketing.retargeting": "Ретаргетинг",

    "settings.title": "Настройки",
    "settings.saveChanges": "Сохранить изменения",
    "settings.saving": "Сохранение...",
    "settings.profileInformation": "Профиль",
    "settings.updatePersonalDetails": "Обновите личные данные",
    "settings.firstName": "Имя",
    "settings.lastName": "Фамилия",
    "settings.email": "Email",
    "settings.phone": "Телефон",
    "settings.company": "Компания",
    "settings.security": "Безопасность",
    "settings.managePasswordSecurity": "Управление паролем и безопасностью",
    "settings.password": "Пароль",
    "settings.lastChanged3Months": "Изменен 3 месяца назад",
    "settings.changePassword": "Сменить пароль",
    "settings.notifications": "Уведомления",
    "settings.chooseNotifications": "Выберите, какие уведомления получать",
    "settings.emailNotifications": "Email-уведомления",
    "settings.receiveEmailUpdates": "Получать обновления аккаунта по email",
    "settings.pushNotifications": "Push-уведомления",
    "settings.receivePushNotifications": "Получать push-уведомления на устройство",
    "settings.weeklyDigest": "Еженедельный дайджест",
    "settings.getWeeklySummary": "Получать еженедельную сводку активности",
    "settings.preferences": "Предпочтения",
    "settings.customizeExperience": "Настройте интерфейс под себя",
    "settings.language": "Язык",
    "settings.currency": "Валюта",
    "settings.currencyUSD": "Доллар (USD)",
    "settings.currencyKGS": "Сом (KGS)",
    "settings.currencyRUB": "Рубль (RUB)",
    "settings.currencyKZT": "Тенге (KZT)",
    "settings.appearance": "Внешний вид",
    "settings.customizeLooks": "Настройте внешний вид приложения",
    "settings.light": "Светлая",
    "settings.dark": "Темная",
    "settings.system": "Системная",
  },
  ky: {
    "nav.dashboard": "Башкаруу тактасы",
    "nav.products": "Товарлар",
    "nav.users": "Колдонуучулар",
    "nav.marketing": "Маркетинг",
    "nav.analytics": "Аналитика",
    "nav.settings": "Жөндөөлөр",
    "nav.search": "Издөө",
    "nav.logout": "Чыгуу",

    "common.viewAll": "Баарын көрүү",
    "common.actions": "Аракеттер",
    "common.image": "Сүрөт",
    "common.name": "Аты",
    "common.email": "Email",
    "common.plan": "План",
    "common.dateCreated": "Түзүлгөн күнү",
    "common.category": "Категория",
    "common.price": "Баасы",
    "common.stock": "Калдыгы",
    "common.status": "Статус",
    "common.cancel": "Жокко чыгаруу",
    "common.add": "Кошуу",
    "common.new": "Жаңы",

    "dashboard.welcomeBack": "Кош келиңиз, John",
    "dashboard.aiInsights": "AI анализи",
    "dashboard.mrrGrowth": "MRR өсүшү",
    "dashboard.lastDays": "Акыркы {days} күн",
    "dashboard.recentUsers": "Акыркы колдонуучулар",
    "dashboard.accountBalance": "Эсеп балансы",
    "dashboard.withdraw": "Чыгарып алуу",
    "dashboard.availableToWithdraw": "Чыгарууга жеткиликтүү",
    "dashboard.succeeded": "Ийгиликтүү",
    "dashboard.checkoutConversionRate": "Төлөмгө өтүү конверсиясы",
    "dashboard.last31Days": "Акыркы 31 күн",

    "products.title": "Товарлар",
    "products.count": "{count} товар",
    "products.addProduct": "Товар кошуу",
    "products.searchPlaceholder": "Аталышы, категориясы же SKU боюнча издөө...",
    "products.showing": "{total} товардын {shown}ү көрсөтүлдү",
    "products.loading": "Товарлар жүктөлүүдө...",
    "products.noResults": "Издөөгө ылайык товар табылган жок.",
    "products.product": "Товар",
    "products.viewDetails": "Толук көрүү",
    "products.stockLabel": "Калдыгы: {count}",
    "products.addNewProduct": "Жаңы товар кошуу",
    "products.productImage": "Товардын сүрөтү",
    "products.chooseImage": "Сүрөт тандоо",
    "products.productName": "Товардын аты",
    "products.enterProductName": "Товардын атын жазыңыз",
    "products.sku": "SKU",
    "products.enterSku": "мисалы, PRD-2024-001",
    "products.stockQuantity": "Кампадагы саны",
    "products.description": "Сыпаттама",
    "products.enterDescription": "Товардын сыпаттамасын жазыңыз...",

    "users.title": "Колдонуучулар",
    "users.count": "{count} колдонуучу",
    "users.proCount": "{count} Pro колдонуучу",
    "users.addUser": "Колдонуучу кошуу",
    "users.searchPlaceholder": "Аты же email боюнча издөө...",
    "users.showing": "{total} колдонуучунун {shown}ү көрсөтүлдү",
    "users.loading": "Колдонуучулар жүктөлүүдө...",
    "users.noResults": "Издөөгө ылайык колдонуучу табылган жок.",
    "users.edit": "Түзөтүү",
    "users.sendEmail": "Email жөнөтүү",
    "users.addNewUser": "Жаңы колдонуучу кошуу",
    "users.profilePicture": "Профиль сүрөтү",
    "users.chooseImage": "Сүрөт тандоо",
    "users.enterUserName": "Колдонуучунун атын жазыңыз",
    "users.enterUserEmail": "Колдонуучунун email'ин жазыңыз",

    "analytics.title": "Аналитика",
    "analytics.last30Days": "Акыркы 30 күн",
    "analytics.totalVisitors": "Жалпы коноктор",
    "analytics.appDownloads": "Тиркемени жүктөөлөр",
    "analytics.activeUsers": "Активдүү колдонуучулар",
    "analytics.avgSession": "Орточо сессия",
    "analytics.visitorsOverTime": "Убакыт боюнча коноктор",
    "analytics.downloadsByPlatform": "Платформа боюнча жүктөөлөр",
    "analytics.thisMonth": "Бул ай",
    "analytics.topCountries": "Алдыңкы өлкөлөр",
    "analytics.deviceTypes": "Түзмөк түрлөрү",
    "analytics.usageDistribution": "Колдонуу бөлүштүрүлүшү",
    "analytics.visitors": "конок",

    "marketing.title": "Маркетинг",
    "marketing.campaignsCount": "{count} кампания",
    "marketing.searchPlaceholder": "Кампанияны аты, түрү же статусу боюнча издөө...",
    "marketing.showing": "{total} кампаниянын {shown}ү көрсөтүлдү",
    "marketing.campaignName": "Кампания аты",
    "marketing.type": "Түрү",
    "marketing.frequency": "Жыштыгы",
    "marketing.status": "Статус",
    "marketing.noResults": "Издөөгө ылайык кампания табылган жок.",
    "marketing.recurring": "Кайталануучу",
    "marketing.next": "Кийинки",
    "marketing.launch": "Ишке киргизүү",
    "marketing.push": "Push",
    "marketing.inApp": "In-App",
    "marketing.acquisition": "Тартуу",
    "marketing.retargeting": "Ретаргетинг",

    "settings.title": "Жөндөөлөр",
    "settings.saveChanges": "Өзгөртүүлөрдү сактоо",
    "settings.saving": "Сакталып жатат...",
    "settings.profileInformation": "Профиль маалыматы",
    "settings.updatePersonalDetails": "Жеке маалыматыңызды жаңыртыңыз",
    "settings.firstName": "Аты",
    "settings.lastName": "Фамилиясы",
    "settings.email": "Email",
    "settings.phone": "Телефон",
    "settings.company": "Компания",
    "settings.security": "Коопсуздук",
    "settings.managePasswordSecurity": "Сырсөз жана коопсуздук жөндөөлөрү",
    "settings.password": "Сырсөз",
    "settings.lastChanged3Months": "3 ай мурун өзгөртүлгөн",
    "settings.changePassword": "Сырсөздү өзгөртүү",
    "settings.notifications": "Билдирмелер",
    "settings.chooseNotifications": "Кайсы билдирмелерди алууну тандаңыз",
    "settings.emailNotifications": "Email билдирмелер",
    "settings.receiveEmailUpdates": "Аккаунт боюнча жаңылыктарды email аркылуу алуу",
    "settings.pushNotifications": "Push билдирмелер",
    "settings.receivePushNotifications": "Түзмөккө push билдирме алуу",
    "settings.weeklyDigest": "Жумалык дайджест",
    "settings.getWeeklySummary": "Активдүүлүк боюнча жумалык жыйынтык алуу",
    "settings.preferences": "Жеке жөндөөлөр",
    "settings.customizeExperience": "Иштөө тажрыйбаңызды ылайыктаңыз",
    "settings.language": "Тил",
    "settings.currency": "Валюта",
    "settings.currencyUSD": "Доллар (USD)",
    "settings.currencyKGS": "Сом (KGS)",
    "settings.currencyRUB": "Рубль (RUB)",
    "settings.currencyKZT": "Теңге (KZT)",
    "settings.appearance": "Көрүнүш",
    "settings.customizeLooks": "Тиркеменин көрүнүшүн өзгөртүңүз",
    "settings.light": "Жарык",
    "settings.dark": "Караңгы",
    "settings.system": "Системалык",
  },
};

Object.assign(dictionaries.ru, {
  "settings.saved": "Настройки сохранены",
  "settings.loadError": "Не удалось загрузить настройки с API. Используются локальные значения.",
  "settings.saveError": "Не удалось сохранить настройки. Попробуйте снова.",
  "spotlight.searchPlaceholder": "Поиск пользователей, товаров, кампаний и т.д.",
  "login.signIn": "Войти",
  "login.continueMessage": "Чтобы продолжить, войдите в панель управления.",
  "login.continueGoogle": "Продолжить через Google",
  "login.continueApple": "Продолжить через Apple",
  "login.or": "или",
  "login.emailAddress": "Email адрес",
  "login.password": "Пароль",
  "login.agreeTo": "Я согласен с",
  "login.terms": "Условиями и положениями",
  "login.and": "и",
  "login.privacy": "Политикой конфиденциальности",
  "login.needAccess": "Нужен доступ? Свяжитесь с администратором.",
});

Object.assign(dictionaries.ky, {
  "settings.saved": "Жөндөөлөр сакталды",
  "settings.loadError": "API'ден жөндөөлөр жүктөлгөн жок. Жергиликтүү маанилер колдонулат.",
  "settings.saveError": "Жөндөөлөрдү сактоо мүмкүн болгон жок. Кайра аракет кылыңыз.",
  "spotlight.searchPlaceholder": "Колдонуучуларды, товарларды, кампанияларды ж.б. издөө...",
  "login.signIn": "Кирүү",
  "login.continueMessage": "Улантуу үчүн башкаруу тактаңызга кириңиз.",
  "login.continueGoogle": "Google менен улантуу",
  "login.continueApple": "Apple менен улантуу",
  "login.or": "же",
  "login.emailAddress": "Email дареги",
  "login.password": "Сырсөз",
  "login.agreeTo": "Мен",
  "login.terms": "Шарттарга",
  "login.and": "жана",
  "login.privacy": "Купуялык саясатына",
  "login.needAccess": "Кирүү керекпи? Администратор менен байланышыңыз.",
});

function applyParams(template: string, params: TranslationParams): string {
  return template.replace(/\{(\w+)\}/g, (_, key) => String(params[key] ?? `{${key}}`));
}

export function t(language: DashboardLanguage, key: string, params: TranslationParams = {}): string {
  const dict = dictionaries[language] ?? dictionaries.en;
  const value = dict[key] ?? dictionaries.en[key];
  if (!value) {
    return key;
  }
  if (typeof value === "function") {
    return value(params);
  }
  return applyParams(value, params);
}
